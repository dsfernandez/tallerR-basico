---
title: "Creación de Archivos y Edición de Código R"
output:
  html_document:
    css: !expr here::here("styles/styles.css")
    toc: true
    toc_depth:  3
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options("yaml.eval.expr" = TRUE)
```

# 1.4. Creación de Archivos y Edición de Código R  
> En RStudio se pueden crear archivos de diversos formatos.  

## 1.4.1. Archivo de edición de código R (.R)  
__Al final de esta sección podrás crear un archivo y escribir en él algún código R, que podrás correr ( _Run_) y obtener resultados.__  

### R Script: el archivo de edición de códigos R  
> La forma más común de escribir, editar, guardar y correr códigos de R.    

Ingresar y ejecutar tu código en la línea de comando R en la consola, es efectivo y simple. Sin embargo, esta técnica tiene sus limitaciones; cada vez que desees ejecutar un conjunto de comandos, debes volver a ingresarlos en la línea de comandos.  Los comandos complejos están potencialmente sujetos a errores tipográficos, lo que requiere que se vuelvan a ingresar correctamente.  Repetir un conjunto de operaciones requiere volver a ingresar el flujo de código.  Afortunadamente, R y RStudio proporcionan un método para mitigar estos problemas, y los _scripts_ de R son la solución.

Un _script_ es simplemente un archivo de texto que contiene un conjunto de comandos y comentarios. El _script_ se puede guardar y usar más tarde para volver a ejecutar los comandos guardados. El _script_ también se puede editar para que puedas ejecutar una versión modificada de los comandos.

#### Crear un _script_ R

Puedes abrir un archivo de comandos vacío, o _script file_, haciendo clic en __File__, en el menú principal, y seleccionando __New File__, y __R Script__; alternativamente, puedes abrir el menú de archivos, haciendo clic en la cruz blanca ![](media/white-cross-green-circle.jpg){width=4%} al extremo izquierdo, arriba, en el panel de RStudio.

Una vez creado el espacio para códigos, es recomendable guardarlo como archivo __.R__ en el lugar adecuado del directorio, asignándole un nombre corto que indique de que se trata el procedimiento a trabajar; para esto debes hacer clic en la figura del diskette azul, o usar el menú __File__, __Save__.

\

<iframe width=720 height=600 frameborder="0" scrolling="no" src="https://screencast-o-matic.com/player/crVT2F9dLa?ff=1&controls=1" allowfullscreen="true"></iframe>

\

__Referencias__   
R scripts. (n.d.). Retrieved July 29, 2020, from http://mercury.webster.edu/aleshunas/R_learning_infrastructure/R%20scripts.html  

[  __Home__](https://dsfernandez.github.io/tallerR-basico/index.html)  

***  

## 1.4.2. Gramática del lenguaje R   
__Al terminar esta sección conocerás algunas de las reglas para escribir códigos en R__

Escribir códigos en un lenguaje de programación como R, requiere seguir ciertas reglas 'gramaticales', como en cualquier otro lenguaje, para poder lograr una comunicación efectiva, con consistencia y buen entendimiento entre las partes.  En el caso de un lenguaje de programación, aunque generalmente el número de 'palabras' es menor, pero por ser la comunicación mediada por una máquina, esta no posee, hasta ahora, la flexibilidad de los seres humanos que permite entender palabras mal escrita o incompletas, o variaciones en el orden de las mismas.  

Aunque muchos de los códigos que estarán utilizando en los cursos y proyectos podrán copiarlos, es recomendable que escriban algunas líneas de código cortas por su cuenta, para familiarizarce y ejercitarse en la escritura de códigos, ya que siempre deberán realizar edición de los códigos, para adaptarlos a sus datos y procedimientos.

#### Algunas normas de estilo en la escritura de códigos R  

Vamos a empezar con algunas definiciones de términos.  En R, un __objeto__ es cualquier cosa que se puede asignar a una __variable__.  Esto incluye constantes, estructuras de datos, gráficas, funciones.  Todo objeto tiene un _mode_, que describe cómo se guarda el objeto, y una _class_, que indica cómo lo van a manejar las __funciones__.  

Las __funciones__ contienen __argumentos__, que debemos definir para obtener los resultados esperados, aunque usualmente traen argumentos por defecto ( _default_).

__El símbolo #__ se utiliza para iniciar la escritura de texto, que no funcionará como código en el momento de ser procesado.  Es muy importante esta escritura, para documentar los códigos que se utilizan:
```{r eval=FALSE}
# este es un ejemplo de su uso
mean(c(3,5,7,4)) # la función mean calcula la media de un conjunto de números
```

__Nombre de variables:__ el nombre de las variables a las que se asignan valores, resultados de funciones, gráficas, et c., no es recomendable que sean de las funciones del sistema (mean, list, c, sd, et c.).  Hay una lista de nombres reservados que no se pueden usar; para verlas puedes escribir __?reserved__ en la consola.  

Usar nombres con minúsculas ayuda a evitar errores al escribirlos varias veces.  Es recomendable usar abreviaturas que ayuden a recordar su significado, y si hay una serie de objetos similares o con nombres compuestos, utilizar la línea de subrayar ( _underscore_):

```{r eval=FALSE, message=FALSE, warning=FALSE, include=TRUE}
# uso indebido de nombre:
mean <- mean(c(3,5,7,4))
# nombre adecuado:
media <- mean(c(3,5,7,4))
# nombre abreviado
rect <- ancho * largo
# mejor
area_rectang <- ancho * largo
# si tenemos varios cálculos repetidos
area_rectang_1 <- ancho_1 * largo_1
area_rectang_2 <- ancho_2 * largo_2
```

__Argumentos de funciones:__ es recomendable dejar espacios entre los operadores (+, *, /, -, =), dentro de los argumentos de las funciones.  Dejar un espacio después de coma, pero nunca antes.

```{r eval=FALSE, message=FALSE, warning=FALSE, include=TRUE}
# bien
desv_estandar <- sd(c(3, 5, 6, 7), na.rm = TRUE)
# mal
desv_estandar<-sd(c(3,5,6,7),na.rm=TRUE)
```

__Tamaño de las líneas de código:__  para evitar confusión y errores se debe evitar escribir líneas de código muy largas, preferiblemente deben tener menos de 80 caracteres.  Si una línea de código es muy larga se puede cortar, luego de una coma preferiblemente, usando la tecla de nueva línea: _return_ o _enter_.  Automáticamente el editor indenta las nuevas líneas.

```{r eval=FALSE, message=FALSE, warning=FALSE, include=TRUE}
# corte de línea de código larga.
# muy larga y confusa:
plot(X, Y, main = "A plot", xlab = "X Values", ylab = "Response", lty = 1, pch = 5, cex = .75)
# mejor:
plot(X, Y, main = "A plot",
     xlab = "X Values",
     ylab = "Response",
     lty = 1, pch = 5, cex = .75)
```

__Nombre de archivos:__  para nombrar los archivos _script_ de R, recomiendo nombres cortos o abreviados relacionados al procedimiento; si es necesaria más de una palabra, separarlas por guión: __area-rectangulo.R__ (la extensión .R la pone automáticamente el sistema).  

__Referencias__  

R Tutorial—Learn R Programming. (n.d.). DataMentor. Retrieved July 29, 2020, from https://www.datamentor.io/r-programming/\  

Style guide · Advanced R. (n.d.). Retrieved July 29, 2020, from http://adv-r.had.co.nz/Style.html\  

[  __Home__](https://dsfernandez.github.io/tallerR-basico/index.html)   

***  

## 1.4.3. Correr códigos R  
__Al finalizar esta sección podrás obtener resultados al correr códigos R__ 

Una vez que tenemos listo un archivo R Script, podemos obtener los resultados de lo que esperamos haga el mismo, esto es 'correr' el código.  En RStudio podemos hacerlo de diversas formas, cada una con su aplicación a diversos fines.  

- __Usando Run:__ teniendo abierto el archivo R Script, podemos colocar el cursor al final de la línea de código que deseamos correr, o seleccionamos con el cursor un grupo de líneas de código, luego usamos __Run__ (parte superior de la ventana del editor) o __command + return__ en MacOS o su equivalente en Windows.  

- __Usando Source:__ con el archivo R Script abierto en la ventana de edición, hacemos clic en __Source__ (parte de arriba de la ventana de edición), y todas las líneas de código corren, deteniéndose solamente si el programa requiere alguna entrada de datos.  

- __Usando el comando source:__ con el archivo R Script abierto o cerrado, escribimos el comando __source("nombre-del-archivo")__, si este se encuentra en el directorio de trabajo, y el programa correrá igual que en el caso anterior.  

__Referencias__  

How to run the code. (n.d.). Retrieved August 2, 2020, from http://www.rexamples.com/8/How%20to%20run%20the%20code\

R Tutorial—Learn R Programming. (n.d.). DataMentor. Retrieved July 29, 2020, from https://www.datamentor.io/r-programming/\  

***  

##### EJERCICIOS

__* histograma__\  

En este ejercicio les mostraré como en R se pueden hacer cálculos y visualizaciones aparentemente complicadas, con muy pocas líneas de códigos.  
Usarán el siguiente archivo R Script: [ejercicio-script.R](https://raw.githubusercontent.com/dsfernandez/tallerR-basico/master/ejercicio-script.R)

__* area triángulo__\ 

Les toca a ustedes escribir su primer (o repasar) programa en R.  Abre y guarda un archivo R Script con un nombre relacionado a la actividad a realizar. 

[  __Home__](https://dsfernandez.github.io/tallerR-basico/index.html)  

***  

### 1.4.4. Otros archivos en R Studio  
__Al terminar esta sección podrás identificar al menos dos nuevos tipos de archivos en R Studio__  

Al hacer clic en el ícono de la cruz blanca, extremo izquierdo, arriba, aparece un menú de diferentes tipos de archivos que se pueden crear en RStudio, además de R Script.  

![](./media/archivos-rstudio.png)

En este taller estaremos trabajando con dos de ellos:  

- archivos de texto, __Text File__  
- documento __R Markdown__

[  __Home__](https://dsfernandez.github.io/tallerR-basico/index.html)



